var win="undefined"!=typeof window?window:global,localStorageName="localStorage",storage=win[localStorageName],store={enabled:function(){return localStorageName in win&&win[localStorageName]},has:function(a){return store.get(a)?!0:!1},serialize:function(a){return JSON.stringify(a)},deserialize:function(a){if("string"==typeof a)return JSON.parse(a)},set:function(a,b,c){if(void 0===b)return store.remove(a);if(!c||isNaN(c))c=31536E4;storage.setItem(a,store.serialize({val:b,exp:new Date-1+1E3*c}))},get:function(a){var b=store.deserialize(storage.getItem(a));return b?new Date-1>b.exp?(this.remove(a),null):b.val:null},remove:function(a){storage.removeItem(a)},clear:function(){storage.clear()},getAll:function(){var a={};store.forEach(function(b,c){a[b]=c});return a},forEach:function(a){for(var b=0;b<storage.length;b++){var c=storage.key(b);a(c,store.get(c))}}};store.enabled=store.enabled();